<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script type="text/javascript" src="js/tabletop1.3.4.js"></script>
    <script type="text/javascript" src="js/sheetsee.js"></script>
    <link   type='text/css' rel='stylesheet' href='http://api.tiles.mapbox.com/mapbox.js/v1.0.0/mapbox.css'>
    <!-- Add a Title -->
    <title>Map</title>
  </head>
  <style>
 
    #shapesmap {width: 100%; height: 100%;}
 
  </style>
  <body>
    <div id="shapesmap"></div>

    <script type="text/javascript">
      document.addEventListener('DOMContentLoaded', function() {
        // see how what the example spreadsheet looks like:
        // https://docs.google.com/spreadsheet/lv?key=0Ao5u1U6KYND7dGN5QngweVJUWE16bTRob0d2a3dCbnc
        var URL = "1JJKtPl39OgcSPkj_CL5jHgY2SUt4Q6wMEwHNTY0hLgQ"
        Tabletop.init( { key: URL, callback: showInfo, simpleSheet: true } )
      })

      function showInfo(data) {
        var opts = ['PROJECT_COUNT']
        var geojson = Sheetsee.createGeoJSON(data, opts)
        var plytemplate = "<h4>{{PROJECT_COUNT}}</h4>"
        var shapesmap = Sheetsee.loadMap("shapesmap")
        Sheetsee.addTileLayer(shapesmap, 'mapbox.satellite')
        Sheetsee.addMarkerLayer(geojson, shapesmap, plytemplate)
      }
       
  
    </script>
  </body>
</html>
